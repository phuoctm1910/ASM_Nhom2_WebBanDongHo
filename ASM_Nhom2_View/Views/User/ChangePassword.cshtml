@{
    Layout = null;
}

<!doctype html>
<html lang="en">
<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
          crossorigin="anonymous" />
    <link rel="stylesheet" href="~/css/register.css" asp-append-version="true" />

</head>
<body style="background-image: url(/images/background-login.jpg)">
    <div class="container" style="margin-top: 200px;">
        <div>
            <a class="backHome" style="color:" asp-controller="Home" asp-action="Index"> <i class="fa-solid fa-house"></i> Trở về trang chủ</a>
        </div>
        <h1>Đổi Mật Khẩu</h1>

        <form id="changePasswordForm">
            <div class="input-group">
                <label for="currentPassword">Mật Khẩu Hiện Tại:</label>
                <input type="password" id="currentPassword" name="currentPassword" required class="rounded-4">
            </div>
            <div class="input-group">
                <label for="newPassword">Mật Khẩu Mới:</label>
                <input type="password" id="newPassword" name="newPassword" required class="rounded-4">
            </div>
            <div class="input-group">
                <label for="confirmNewPassword">Xác Nhận Mật Khẩu Mới:</label>
                <input type="password" id="confirmNewPassword" name="confirmNewPassword" required class="rounded-4">
            </div>
            <button class="login" type="submit">Đổi Mật Khẩu</button>
            <a class="login" asp-controller="Home" asp-action="Login">Đăng Nhập</a>
        </form>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.8/umd/popper.min.js" integrity="sha512-TPh2Oxlg1zp+kz3nFA0C5vVC6leG/6mm1z9+mA81MI5eaUVqasPLO8Cuk4gMF4gUfP5etR73rgU/8PNMsSesoQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
            integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
            crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#changePasswordForm").submit(function (event) {
                event.preventDefault();

                var currentPassword = $("#currentPassword").val();
                var newPassword = $("#newPassword").val();
                var confirmNewPassword = $("#confirmNewPassword").val();

                $.ajax({
                    type: "POST",
                    url: '@Url.Action("ChangePassword", "User")',
                    data: {
                        currentPassword: currentPassword,
                        newPassword: newPassword,
                        confirmNewPassword: confirmNewPassword
                    },
                    success: function (response) {
                        alert(response.message);
                    },
                    error: function (xhr, status, error) {
                        alert("Đã xảy ra lỗi: " + error);
                    }
                });
            });
        });
    </script>
</body>
</html>
